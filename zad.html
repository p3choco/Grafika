<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>sze≈õciokat</title>
    <style>
        #canvas {
            width: 400px;
            height: 400px;
        }
    </style>
</head>
<body>
    <canvas id="canvas"></canvas>
    <script>
        const vertexShaderTxt = `
        precision mediump float;

        attribute vec2 vertPosition;
        attribute vec3 vertColor;

        varying vec3 fragColor;

        void main()
        {
            fragColor = vertColor;
            gl_Position = vec4(vertPosition, 0.0, 1.0);
        }
        `;

        const fragmentShaderTxt = `
        precision mediump float;

        varying vec3 fragColor;

        void main() {
            gl_FragColor = vec4(fragColor, 1.0);
        }
        `;

        const canvas = document.getElementById("canvas");
        const gl = canvas.getContext("webgl");

        if (!gl) {
            alert("WebGL not supported.");
        }

        gl.clearColor(0.5, 0.5, 0.9, 1.0);
        gl.clear(gl.COLOR_BUFFER_BIT);

        const vertexShader = gl.createShader(gl.VERTEX_SHADER);
        const fragmentShader = gl.createShader(gl.FRAGMENT_SHADER);

        gl.shaderSource(vertexShader, vertexShaderTxt);
        gl.shaderSource(fragmentShader, fragmentShaderTxt);

        gl.compileShader(vertexShader);
        if (!gl.getShaderParameter(vertexShader, gl.COMPILE_STATUS)) {
            console.log(gl.getShaderInfoLog(vertexShader));
        }
        gl.compileShader(fragmentShader);
        if (!gl.getShaderParameter(fragmentShader, gl.COMPILE_STATUS)) {
            console.log(gl.getShaderInfoLog(fragmentShader));
        }

        const program = gl.createProgram();

        gl.attachShader(program, vertexShader);
        gl.attachShader(program, fragmentShader);
        gl.linkProgram(program);

        gl.detachShader(program, vertexShader);
        gl.detachShader(program, fragmentShader);

        gl.validateProgram(program);

        const vertices = [
            0.0, 0.0, 1.0, 0.0, 0.0,
            -0.25, 0.43, 1.0, 0.0, 0.0,
            0.25, 0.43, 1.0, 0.0, 0.0,
            0.5, 0.0, 1.0, 0.0, 0.0,
            0.25, -0.43, 1.0, 0.0, 0.0,
            -0.25, -0.43,1.0, 0.0, 0.0,
            -0.5, 0.0, 1.0, 0.0, 0.0,
            -0.25, 0.43, 1.0, 0.0, 0.0,
        ];

        const vertexBuffer = gl.createBuffer();
        gl.bindBuffer(gl.ARRAY_BUFFER, vertexBuffer);
        gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(vertices), gl.STATIC_DRAW);

        const positionAttributeLocation = gl.getAttribLocation(program, "vertPosition");
        const colorAttributeLocation = gl.getAttribLocation(program, "vertColor");

        gl.vertexAttribPointer(
            positionAttributeLocation,
            2,
            gl.FLOAT,
            false,
            5 * Float32Array.BYTES_PER_ELEMENT,
            0
        );

        gl.vertexAttribPointer(
            colorAttributeLocation,
            3,
            gl.FLOAT,
            false,
            5 * Float32Array.BYTES_PER_ELEMENT,
            2 * Float32Array.BYTES_PER_ELEMENT
        );

        gl.enableVertexAttribArray(positionAttributeLocation);
        gl.enableVertexAttribArray(colorAttributeLocation);

        gl.useProgram(program);
        gl.drawArrays(gl.TRIANGLE_FAN, 0, 8);
    </script>
</body>
</html>